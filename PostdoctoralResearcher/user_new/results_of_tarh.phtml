<?
include("include/database-connect.phtml");
include("include/include.phtml");
include("include/vars.inc.phtml");

header_forms();
?>
<!-- BEGIN PAGE LEVEL STYLES -->
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link rel="stylesheet" type="text/css" href="../assets/plugins/select2/select2-rtl.css"/>
    <link id="select2-metronic" rel="stylesheet" type="text/css" href="../assets/plugins/select2/select2-metronic-rtl.css"/>
    
    <link id="DT_bootstrap" rel="stylesheet" href="../assets/plugins/data-tables/DT_bootstrap_rtl.css"/>

    <link href="../assets/advanced-datatable/extensions/TableTools/css/dataTables.colVis.css" rel="stylesheet" />
    <link href="../assets/advanced-datatable/extensions/TableTools/css/dataTables.tableTools.css" rel="stylesheet" />
    <link href="../assets/plugins/persian-datepicker/bootstrap-datepicker.min.css" rel="stylesheet" type="text/css" />
    <link id="toastr" rel="stylesheet" type="text/css" href="../assets/plugins/bootstrap-toastr/toastr-rtl.min.css"/>
<!-- END PAGE LEVEL STYLES -->
    
    <!--First of test with previous css  -->
    <!-- <link href="../assets/advanced-datatable/media/css/demo_table.css" rel="stylesheet" /> -->
      
    <!-- End of test with previous css -->
    <!-- END PAGE LEVEL STYLES -->
<?php
$menu_id="2";
$sub_menu_id="2";
include("include/new_menu.php");

$query="select * from send_article where cod_tarh=\"$cod_tarh\" ";
$result=mysql_query($query) or die("Error in updating data into tarh1");
$my_row_fetched=mysql_fetch_array($result);
//$noavari=$my_row_fetched['noavari'];
$noavari=$my_row_fetched['noavari'];
$natayej_tarh_kharej_daneshgah=$my_row_fetched['natayej_tarh_kharej_daneshgah'];
$tolid=$my_row_fetched['tolid'];
$natayej_tarh_dar_modiriyat=$my_row_fetched['natayej_tarh_dar_modiriyat'];

?>

 <!-- BEGIN CONTENT -->
        <div class="page-content-wrapper">
            <div class="page-content"> 
                
                <!-- BEGIN PAGE HEADER-->
                <div class="row">
                    <div class="col-md-12">
                        <!-- BEGIN PAGE TITLE & BREADCRUMB-->
                        <h4 class="page-title"> 
                            <small id="page-title">پاسخ به سوالات قرارداد طرح : <?php echo $tarh_name;?></small>
                        </h4>
                        <ul class="page-breadcrumb breadcrumb">

                            <li>
                                <i class="fa fa-home"></i>
                                <a id="breadcrumb1" href="home.html">
                                    خانه
                                </a>
                                <i id="fa-angle-left1" class="fa fa-angle-left"></i>
                            </li>
                            
                            <li>
                                <a id="breadcrumb2" href="tarh_list.phtml">
                                    طرح هاي ارسالي شما
                                </a>
                                <i id="fa-angle-left2" class="fa fa-angle-left"></i>
                            </li>
                            <li>
                                <a id="breadcrumb3" href="tarh_list.phtml?position=3">
                                      طرح هاي خاتمه يافته
                                </a>
                                <i id="fa-angle-left3" class="fa fa-angle-left"></i>
                            </li>
                            <li>
                                <a id="breadcrumb4" href="results_of_tarh.phtml?cod_tarh=<?php echo $cod_tarh; ?>">
                                    پاسخ به سوالات مقاله
                                </a>
                            </li>
                        </ul>
                        <!-- END PAGE TITLE & BREADCRUMB-->
                    </div>
                </div>
                <!-- END PAGE HEADER-->
                <!-- BEGIN PAGE CONTENT-->
					<div class="row">
					 <div class="modal fade" id="portlet-config" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                <h4 class="modal-title">راهنما</h4>
                            </div>
                            <div class="modal-body">
                                در حال تکمیل می باشد.
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn default red" data-dismiss="modal">بستن</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                    </div>
				<div class="col-md-12">
					<div class="portlet box blue" id="form_wizard_1">
						<div class="portlet-title">
							<div id="caption_wizard" class="caption">
								<i class="fa fa-reorder"></i> پاسخ به سوالات مقاله -
								<span class="step-title">
									 مرحله 1 از 3
								</span>
							</div>
							<div class="tools">
                                    <a href="javascript:;" class="collapse">
									</a>
									<a id="portlet_config" href="#portlet-config" data-toggle="modal"
									class="fa fa-info-circle" title="راهنما"
									style="color: white">
									</a>
                                </div>
						</div>
						<div class="portlet-body form">
							<form action="results_of_tarh.php?action=delete_file" method="post" enctype="multipart/form-data" class="form-horizontal" id="delete_file">
							<input name="cod_tarh" id="cod_tarh" type="hidden" value="<?php echo $cod_tarh;?>">
						    <input id="delete_id" name="delete_id" type="hidden">
							 					<div class="modal fade " id="delete"  tabindex="-1" role="basic" aria-hidden="true">
							                            <div class="modal-dialog">
							                                <div class="modal-content">
							                                    <div class="modal-header">
							                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
							                                        <h4 class="modal-title">
							                                            <i class="fa fa-file-o"></i>
							                                       
							                                        </h4>
							                                    </div>
							                                    <div class="modal-body">
							                                        <!-- BEGIN FORM-->
																	
																		<div class="form-body">
																			<h4 id="delete_message" class="form-section">آيا از حذف اين آيتم اطمينان داريد؟</h4>
																		</div>
																		<div class="form-actions fluid">
																			<div class="row">
																				<div class="col-md-6">
																					<div class="col-md-offset-3 col-md-9">
																						<button id="btn1" type="submit"  class="btn green">بلي</button>
																						<button id="btn2" type="button" class="btn red" data-dismiss="modal" ><i class="fa fa-times"></i>خير</button>
																					</div>
																				</div>
																				<div class="col-md-6">
																				</div>
																			</div>
																		</div>
																	
																	<!-- END FORM-->
							                                    </div>
							                                    
							                                </div>
							                                <!-- /.modal-content -->
							                            </div>
							                            <!-- /.modal-dialog -->
							                      </div>
							     </form>
							
							<form action="#" class="form-horizontal" method="post" enctype="multipart/form-data" id="submit_form">
							<input name="cod_tarh" id="cod_tarh" type="hidden" value="<?php echo $cod_tarh;?>">
							<input name="admin" id="admin" type="hidden" value="<?php echo $admin;?>">
						    <input name="version" id="version" type="hidden" value="<?php echo $version;?>">
						    <input id="delete_id" name="delete_id" type="hidden">
								<div class="form-wizard">
									<div class="form-body">
										<ul class="nav nav-pills nav-justified steps">
											<li>
												<a href="#tab1" data-toggle="tab" id="step1" class="step">
													<span class="number">
														 1
													</span>
													<span id="desc1" class="desc">
														<i class="fa fa-check"></i> پاسخ به سوالات مقاله
													</span>
												</a>
											</li>
											<li>
												<a href="#tab2" data-toggle="tab" id="step2" class="step">
													<span class="number">
														 2
													</span>
													<span id="desc2" class="desc">
														<i class="fa fa-check"></i> ارسال مستندات
													</span>
												</a>
											</li>
											<li>
												<a href="#tab3" data-toggle="tab" id="step3" class="step">
													<span class="number">
														 3
													</span>
													<span id="desc3" class="desc">
														<i class="fa fa-check"></i> تکميل و ارسال
													</span>
												</a>
											</li>
										</ul>
										<div id="bar" class="progress progress-striped" role="progressbar">
											<div class="progress-bar progress-bar-success">
											</div>
										</div>
										<div class="tab-content">
											<div id="alert-danger" class="alert alert-danger display-none">
												<button class="close" data-dismiss="alert"></button>
												پر کردن تمام فيلد ها اجباري است
											</div>
											<div class="tab-pane active" id="tab1">
												<h3 id="block1" class="block">پاسخ به سوالات مقاله</h3>
												<div class="form-body">
											            <span id="help_block1" class="help-block">با توجه به <a href="agreement/article revised1.doc">آيين‌نامه اختصاص امتياز به نتايج طرح‌هاي تحقيقاتي</a> اين طرح مشمول کدام يک از موارد زير مي باشد توضيح دهيد:</span>
														<div class="row margin-top-20">
															<div class="col-md-10 col-lg-push-1">
																<div class="form-group">
																<label id="innovation" class="control-label col-md-3">نوآوري ، اكتشاف، اختراع ثبت شده و بومي‌سازي فناوري
																		<span class="required">
																			*
																	    </span>
																</label>
																<div class="col-md-8">
																		<div class="input-icon right">
																				<i class="fa"></i>
									                                            <textarea id="noavari" name="noavari" class="form-control" rows="3"><? echo $noavari; ?></textarea>
					                                            		</div>
					                                            </div>
					                                            </div>
															</div>
															<!--/span-->
														</div>
														<!--/row-->
														<div class="row margin-top-20">
														<div class="col-md-10 col-lg-push-1">
															<div class="form-group">
															    <label id="external" class="control-label col-md-3">استفاده از نتايج طرح تحقيقاتي توسط مشتريان خارج از دانشگاه
																		<span class="required">
																			*
																		</span>
																</label>
																<div class="col-md-8">
																		<div class="input-icon right">
																				<i class="fa"></i>
									                                            <textarea id="natayej_tarh_kharej_daneshgah" name="natayej_tarh_kharej_daneshgah" class="form-control" rows="3"><? echo $natayej_tarh_kharej_daneshgah; ?></textarea>
				                                           				</div>
					                                            </div>
				                                            </div>
														</div>
														
														<!--/span-->
														</div>	
														<div class="row margin-top-20">
															<div class="col-md-10 col-lg-push-1">
																<div class="form-group">
																	<label id="mass_production" class="control-label col-md-3">توليد در مقياس انبوه شده و يا در صنايع دارويي، غذايي، تجهيزات پزشكي و مواد شوينده، آرايشي و بهداشتي
																		<span class="required">
																			*
																		</span>
																	</label>
																	<div class="col-md-8">
																		<div class="input-icon right">
																			    <i class="fa"></i>
									                                            <textarea id="tolid" name="tolid" class="form-control" rows="3"><? echo $tolid; ?></textarea>
					                                            		</div>
					                                            </div>
					                                            </div>
															</div>
															
															<!--/span-->
														</div>	
														<div class="row margin-top-20">
															<div class="col-md-10 col-lg-push-1">
																<div class="form-group">
																<label id="health_service" class="control-label col-md-3">استفاده از نتايج طرح در مديريت خدمات بهداشتي، درماني، آموزشي و پژوهشي يا در جهت بهبود شيوه‌هاي زندگي مردم
																	<span class="required">
																		*
																	</span>
																</label>
																	<div class="col-md-8">
																		<div class="input-icon right">
																	    <i class="fa"></i>
								                                            <textarea id="natayej_tarh_dar_modiriyat" name="natayej_tarh_dar_modiriyat" class="form-control" rows="3"><? echo $natayej_tarh_dar_modiriyat; ?></textarea>
						                                            	</div>
						                                            </div>
					                                            </div>
															</div>
															
															<!--/span-->
														</div>	
													</div>					
											</div>
											<div class="tab-pane" id="tab2">
												<h3 id="block2" class="block">ارسال مستندات</h3>
												<div class="form-body">
													<div class="row margin-top-20">
															<div class="col-md-10 col-lg-push-1">
																<div class="form-group">
																<label id="send_document" class="control-label col-md-3">ارسال مستندات فوق
																	<span class="required">
																		
																	</span>
																</label>
																	<div class="col-md-8">
																		<div class="input-icon right">
																	    <i class="fa"></i>
								                                            <input type="file" id="fupload" name="fupload" accept="application/msword,application/pdf,.docx">
						                                            		
						                                            	</div>
																			<table class="table table-striped table-bordered table-hover sample_1">
																				<thead>
																					<tr>
																						<th id="th1" class="">نام فايل</th>
																						<th id="th2" class="">حذف</th>
																						<th class="hidden">delete_id</th>
																					</tr>
									
																				</thead>
									
																			</table>
																			<button id="upload_article_btn" type="submit" class="btn blue btn-primary" data-loading-text="در حال بارگذاري...">ارسال</button>
						                                             </div>
					                                            </div>
															</div>
															
															<!--/span-->
														</div>							
												<!--/row-->																																											
										       </div>				
											</div>
											
											<div class="tab-pane" id="tab3">
												<h3 id="block3" class="block">تکميل و ارسال</h3>
												<h4 id="form-section1" class="form-section">پاسخ به سوالات مقاله</h4>
												<div class="form-group">
													<label id="lb15" class="control-label col-md-3">نوآوري ، اكتشاف، اختراع ثبت شده و بومي‌سازي فناوري </label>
													<div class="col-md-4">
														<p class="form-control-static" data-display="noavari">
														</p>
													</div>
												</div>
												<div class="form-group">
													<label id="lb16" class="control-label col-md-3">استفاده از نتايج طرح تحقيقاتي توسط مشتريان خارج از دانشگاه </label>
													<div class="col-md-4">
														<p class="form-control-static" data-display="natayej_tarh_kharej_daneshgah">
														</p>
													</div>
												</div>
												
												<div class="form-group">
													<label id="lb17" class="control-label col-md-3">توليد در مقياس انبوه شده و يا در صنايع دارويي، غذايي، تجهيزات پزشكي و مواد شوينده، آرايشي و بهداشتي </label>
													<div class="col-md-4">
														<p class="form-control-static" data-display="tolid">
														</p>
													</div>
												</div>
												<div class="form-group">
													<label id="lb18" class="control-label col-md-3">استفاده از نتايج طرح در مديريت خدمات بهداشتي، درماني، آموزشي و پژوهشي يا در جهت بهبود شيوه‌هاي زندگي مردم </label>
													<div class="col-md-4">
														<p class="form-control-static" data-display="natayej_tarh_dar_modiriyat">
														</p>
													</div>
												</div>
												<h4 id="form-section2" class="form-section">مستندات</h4>
												<div id="gozaresh_tablel" class="table-responsive">
														<table class="table table-striped table-bordered table-hover sample_1">
															<thead>
																<tr>
																	<th id="th1_2" class="">نام فايل</th>
																	<th id="th2_2" class="">حذف</th>
																	<th class="hidden">delete_id</th>
																</tr>
				
															</thead>
				
														</table>
												</div>
											</div>
										</div>
									</div>
									<div class="form-actions fluid">
										<div class="row">
											<div class="col-md-12">
												<div class="col-md-offset-3 col-md-9">
													<a id="button-previous" href="javascript:;" class="btn default button-previous">
														<i class="m-icon-swapleft"></i> صفحه قبل
													</a>
													<a id="button-next" href="javascript:;" class="btn blue button-next">
														 ادامه <i class="m-icon-swapright m-icon-white"></i>
													</a>
													<a id="button-submit" href="javascript:;" class="btn green button-submit">
														 اتمام <i class="m-icon-swapright m-icon-white"></i>
													</a>
												</div>
											</div>
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
<!-- END PAGE CONTENT-->
</div>
</div>
<!-- END CONTENT -->

<script>
if(language=="en"){																										    
debugger;
document.getElementById("page-title").textContent="Project Resulted";
document.getElementById("breadcrumb1").textContent="Home";
document.getElementById("breadcrumb2").textContent="Your Projects";
document.getElementById("breadcrumb3").textContent="Finished Projects";
document.getElementById("breadcrumb4").textContent="Project Resulted";
document.getElementById("caption_wizard").innerHTML="<i class='fa fa-reorder'></i> Form Wizard - <span class='step-title'>Step 1 of 3</span>";
document.getElementById("delete_message").textContent="Are you sure to remove this item?";
document.getElementById("btn1").textContent="Yes";
document.getElementById("btn2").textContent="Cancel";
document.getElementById("fa-angle-left1").setAttribute("class","fa fa-angle-right");
document.getElementById("fa-angle-left2").setAttribute("class","fa fa-angle-right");
document.getElementById("fa-angle-left3").setAttribute("class","fa fa-angle-right");
document.getElementById("desc1").innerHTML="<i class='fa fa-check'></i>Answer to Questions Article";
document.getElementById("desc2").innerHTML="<i class='fa fa-check'></i>Send Documents";
document.getElementById("desc3").innerHTML="<i class='fa fa-check'></i>Completion and Submission";
document.getElementById("alert-danger").innerHTML="<button class='close' data-dismiss='alert'></button>You have some form errors. Please check below.";
document.getElementById("block1").textContent="Answer to Questions Article";
document.getElementById("help_block1").innerHTML="Which of <a href='agreement/article revised1.doc'>the following cathegories</a> apply/applies to the outcomes of your projects?";
document.getElementById("innovation").innerHTML="Resulting in innovations, discoveries, inventions or technology localization<span class='required'>*</span>";
document.getElementById("external").innerHTML="Being used or applied by the external customers?<span class='required'>*</span>";
document.getElementById("mass_production").innerHTML="Being used for mass production in pharmaceutical, food, medical, equipment, health care, cosmetic, detergent industry?<span class='required'>*</span>";
document.getElementById("health_service").innerHTML="Being applied in health services management, treatment, education, research or improving people`s quality of life?<span class='required'>*</span>";
document.getElementById("block2").textContent="Send Documents";
document.getElementById("send_document").textContent="Send Documents";
document.getElementById("th1").textContent="File Name";
document.getElementById("th2").textContent="Delete";
document.getElementById("upload_article_btn").textContent="Send";
document.getElementById("upload_article_btn").setAttribute("data-loading-text","Loading...");
document.getElementById("block3").textContent="Completion and Submission ";
document.getElementById("form-section1").textContent="Answer to Questions Article";
document.getElementById("lb15").textContent="Resulting in innovations, discoveries, inventions or technology localization";
document.getElementById("lb16").textContent="Being used or applied by the external customers?";
document.getElementById("lb17").textContent="Being used for mass production in pharmaceutical, food, medical, equipment, health care, cosmetic, detergent industry?";
document.getElementById("lb18").textContent="Being applied in health services management, treatment, education, research or improving people`s quality of life?";
document.getElementById("th1_2").textContent="File Name";
document.getElementById("th2_2").textContent="Delete";
document.getElementById("form-section2").textContent="Send Documents";
document.getElementById("button-previous").textContent="Previous page";
document.getElementById("button-next").textContent="continuation";
document.getElementById("button-submit").textContent="Final";
document.getElementById("DT_bootstrap").href="../assets/plugins/data-tables/DT_bootstrap.css";
document.getElementById("select2-metronic").href="../assets/plugins/select2/select2-metronic.css";
document.getElementById("toastr").href="../assets/plugins/bootstrap-toastr/toastr.min.css";
}
</script>

<?php 
include("../include/primary_js.phtml");
?>
<!-- BEGIN PAGE LEVEL PLUGINS -->
    <script type="text/javascript" src="../assets/plugins/select2/select2.min.js"></script>
    <script type="text/javascript" language="javascript" src="../assets/advanced-datatable/media2/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="../assets/plugins/data-tables/DT_bootstrap.js"></script> 
	<script type="text/javascript" language="javascript" src="../assets/advanced-datatable/extensions/TableTools/js/dataTables.colVis.js"></script>
	<script type="text/javascript" language="javascript" src="../assets/advanced-datatable/extensions/TableTools/js/dataTables.tableTools.js"></script>
	<script src="../assets/persian-datepicker/jquery.ui.datepicker-cc.all.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="../assets/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js"></script>
	<script type="text/javascript" src="../assets/plugins/jquery-validation/dist/jquery.validate.min.js"></script>
<!-- 	<script type="text/javascript" src="assets/plugins/jquery-validation/dist/additional-methods.min.js"></script> -->
    <script src="../assets/scripts/custom/form-wizard.js"></script>
    <script src="../assets/plugins/bootstrap-toastr/toastr.min.js"></script>
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN PAGE LEVEL SCRIPTS -->
    <!--<script src="../assets/scripts/core/app.js"></script>-->
    <!--<script src="../assets/scripts/custom/table-advanced.js"></script>-->
    <!-- END PAGE LEVEL SCRIPTS -->
    <script>
        jQuery(document).ready(function () {
       	 FormWizard.init();
       	 debugger;
    	   var detailRows = [];
    	   show_dataTable();
        });
     </script>
     <script>
     $("#delete_file").submit(function(e)
  	 {
			debugger;
			 var btn = $("#upload_article_btn");
			 btn.button('loading');
			$.ajax(
			{
				//data:postData,
				url :"results_of_tarh.php?action=delete_file",
				//url : formURL,
				data : new FormData(this),
				cache: false,
			    contentType: false,
			    processData: false,
			    type: "POST",
			    
				success:function(data, textStatus, jqXHR) 
				{
					debugger;
                    //alert(data);
					if(data=="ضميمه حذف شد")
					{       
							toastr.options.timeOut="5000";
					        toastr.options.positionClass="toast-top-right";
							toastr.success('ضميمه حذف شد');
					}
					 //jadvZar_IsNew="insert";
					 $("#delete").modal('hide');
					 $(".sample_1").DataTable().destroy();
					 show_dataTable();		
				},
				error: function(jqXHR, textStatus, errorThrown) 
				{
					alert(textStatus);
				}
			}).always(function () { 
				 btn.button('reset');	//STOP default action
  	 });
			e.preventDefault(); //STOP default action
  	 });
    </script>

    <script>
    if(language=="en")
    {
    	step="step ";
    	of=" of ";
    	FAQ="Project resulted was entry";
    }
    else
    {
    	step=" مرحله";
    	of=" از ";
    	FAQ=" نتايج طرح با موفقيت ثبت شد";
    }
    var FormWizard = function () {


        return {
            //main function to initiate the module
            init: function () {
                if (!jQuery().bootstrapWizard) {
                    return;
                }

                function format(state) {
                    if (!state.id) return state.text; // optgroup
                    return "<img class='flag' src='assets/img/flags/" + state.id.toLowerCase() + ".png'/>&nbsp;&nbsp;" + state.text;
                }

                var form = $('#submit_form');
                var error = $('.alert-danger', form);
                var success = $('.alert-success', form);

                form.validate({
                    doNotHideMessage: true, //this option enables to show the error/success messages on tab switch.
                    errorElement: 'span', //default input error message container
                    errorClass: 'help-block', // default input error message class
                    focusInvalid: false, // do not focus the last invalid input
                    rules: {
                        //account
                		noavari: {
                            required: true
                           
                        },
  natayej_tarh_kharej_daneshgah: {
                            required: true
                        },
                          tolid: {
                            required: true                       
                        },
     natayej_tarh_dar_modiriyat: {                      
                            required: true                       
                        },
                       
                    },

                    

                    errorPlacement: function (error, element) { // render error placement for each input type
                        if (element.attr("name") == "gender") { // for uniform radio buttons, insert the after the given container
                            error.insertAfter("#form_gender_error");
                        } else if (element.attr("name") == "payment[]") { // for uniform radio buttons, insert the after the given container
                            error.insertAfter("#form_payment_error");
                        } else {
                            error.insertAfter(element); // for other inputs, just perform default behavior
                        }
                    },

                    invalidHandler: function (event, validator) { //display error alert on form submit   
                        success.hide();
                        error.show();
                        App.scrollTo(error, -200);
                    },

                    highlight: function (element) { // hightlight error inputs
                        $(element)
                            .closest('.form-group').removeClass('has-success').addClass('has-error'); // set error class to the control group
                    },

                    unhighlight: function (element) { // revert the change done by hightlight
                        $(element)
                            .closest('.form-group').removeClass('has-error'); // set error class to the control group
                    },

                    success: function (label) {
                        if (label.attr("for") == "gender" || label.attr("for") == "payment[]") { // for checkboxes and radio buttons, no need to show OK icon
                            label
                                .closest('.form-group').removeClass('has-error').addClass('has-success');
                            label.remove(); // remove error label here
                        } else { // display success icon for other inputs
                            label
                                .addClass('valid') // mark the current input as valid and display OK icon
                            .closest('.form-group').removeClass('has-error').addClass('has-success'); // set success class to the control group
                        }
                    },

                    submitHandler: function (form) {
    					debugger;
                        success.show();
                        error.hide();
    				//	fkjfjkj
    					debugger;
    					
                        //add here some ajax code to submit your form or just call form.submit() if you want to submit the form without ajax
    					
                    }

                });

                var displayConfirm = function() {
                    $('#tab3 .form-control-static', form).each(function(){
                        var input = $('[name="'+$(this).attr("data-display")+'"]', form);
                        if (input.is(":radio")) {
                            input = $('[name="'+$(this).attr("data-display")+'"]:checked', form);
                        }
                        if (input.is(":text") || input.is("textarea")) {
                            $(this).html(input.val());
                        } else if (input.is("select")) {
                            $(this).html(input.find('option:selected').text());
                        } else if (input.is(":radio") && input.is(":checked")) {
                            $(this).html(input.attr("data-title"));
                        } else if ($(this).attr("data-display") == 'payment') {
                            var payment = [];
                            $('[name="payment[]"]').each(function(){
                                payment.push($(this).attr('data-title'));
                            });
                            $(this).html(payment.join("<br>"));
                        }
                    });
                }

                var handleTitle = function(tab, navigation, index) {
                    var total = navigation.find('li').length;
                    var current = index + 1;
                    // set wizard title
                    $('.step-title', $('#form_wizard_1')).text(step + (index + 1) + of + total);
                    // set done steps
                    jQuery('li', $('#form_wizard_1')).removeClass("done");
                    var li_list = navigation.find('li');
                    for (var i = 0; i < index; i++) {
                        jQuery(li_list[i]).addClass("done");
                    }

                    if (current == 1) {
                        $('#form_wizard_1').find('.button-previous').hide();
                    } else {
                        $('#form_wizard_1').find('.button-previous').show();
                    }

                    if (current >= total) {
                        $('#form_wizard_1').find('.button-next').hide();
                        $('#form_wizard_1').find('.button-submit').show();
                        displayConfirm();
                    } else {
                        $('#form_wizard_1').find('.button-next').show();
                        $('#form_wizard_1').find('.button-submit').hide();
                    }
                    App.scrollTo($('.page-title'));
                }

                // default form wizard
                $('#form_wizard_1').bootstrapWizard({
                    'nextSelector': '.button-next',
                    'previousSelector': '.button-previous',
                    onTabClick: function (tab, navigation, index, clickedIndex) {
                        success.hide();
                        error.hide();
                        var step_var=tab.children().attr("id");
                        var postData = form.serializeArray();
                        if (step_var!="step3" && form.valid() == false) {
                            return false;
                        }
                        handleTitle(tab, navigation, clickedIndex);
                    },
                    onNext: function (tab, navigation, index) {
                        success.hide();
                        error.hide();
    					debugger;
    					var postData = form.serializeArray();
    					var step_var=tab.children().attr("id");
    					if(step_var=="step2")
    					{
    						$.ajax(
    								{
    									data:postData,
    									url : "#",
    									type: "POST",
    									
    									success:function(data, textStatus, jqXHR) 
    									{
        									//alert(data);
    									
    									},
    									error: function(jqXHR, textStatus, errorThrown) 
    									{
    									}
    								});
    					}
    					else
    					{
    	                    if (form.valid() == false) {
    	                        return false;
    	                    }
    						else
    						{							
    								$.ajax(
    								{
    									data:postData,
    									url : "results_of_tarh.php?step="+step_var,
    									type: "POST",
    								    
    									success:function(data, textStatus, jqXHR) 
    									{
    										//alert(data);
    										//alert(step_var);
    									},
    									error: function(jqXHR, textStatus, errorThrown) 
    									{
    									}
    								});
    							}
    					}

                        handleTitle(tab, navigation, index);
                    },
                    onPrevious: function (tab, navigation, index) {
                        success.hide();
                        error.hide();

                        handleTitle(tab, navigation, index);
                    },
                    onTabShow: function (tab, navigation, index) {
                        var total = navigation.find('li').length;
                        var current = index + 1;
                        var $percent = (current / total) * 100;
                        $('#form_wizard_1').find('.progress-bar').css({
                            width: $percent + '%'
                        });
    					
                    }
                });

                $('#form_wizard_1').find('.button-previous').hide();
                $('#form_wizard_1 .button-submit').click(function () {
                	var postData = form.serializeArray();
                	$.ajax(
    						{
    							data:postData,
    							url : "#",
    							type: "POST",
    							
    							success:function(data, textStatus, jqXHR) 
    							{
    								toastr.options.timeOut="3000";
    						        toastr.options.positionClass="toast-top-right";
    								toastr.success(FAQ);
    								setInterval(function(){
    										window.location.href="tarh_list.phtml?position=3";	
    									},3000);
    							},
    							error: function(jqXHR, textStatus, errorThrown) 
    							{
    							}
    						});
                }).hide();
            }

        };

    }();

    $("#submit_form").submit(function(e) {
		debugger;
		var error = $('.alert-danger', form);
        var success = $('.alert-success', form);
    	var form = $("#submit_form");
    	form.validate({
            doNotHideMessage: true, //this option enables to show the error/success messages on tab switch.
            errorElement: 'span', //default input error message container
            errorClass: 'help-block', // default input error message class
            focusInvalid: false, // do not focus the last invalid input
            rules: {
                //account
        		noavari: {
                    required: true
                   
                },
natayej_tarh_kharej_daneshgah: {
                    required: true
                },
                  tolid: {
                    required: true                       
                },
natayej_tarh_dar_modiriyat: {                      
                    required: true                       
                },
               
            },
            

            errorPlacement: function (error, element) { // render error placement for each input type
                if (element.attr("name") == "gender") { // for uniform radio buttons, insert the after the given container
                    error.insertAfter("#form_gender_error");
                } else if (element.attr("name") == "payment[]") { // for uniform radio buttons, insert the after the given container
                    error.insertAfter("#form_payment_error");
                } else {
                    error.insertAfter(element); // for other inputs, just perform default behavior
                }
            },

            invalidHandler: function (event, validator) { //display error alert on form submit   
                success.hide();
                error.show();
                App.scrollTo(error, -200);
            },

            highlight: function (element) { // hightlight error inputs
                $(element)
                    .closest('.form-group').removeClass('has-success').addClass('has-error'); // set error class to the control group
            },

            unhighlight: function (element) { // revert the change done by hightlight
                $(element)
                    .closest('.form-group').removeClass('has-error'); // set error class to the control group
            },

            success: function (label) {
                if (label.attr("for") == "gender" || label.attr("for") == "payment[]") { // for checkboxes and radio buttons, no need to show OK icon
                    label
                        .closest('.form-group').removeClass('has-error').addClass('has-success');
                    label.remove(); // remove error label here
                } else { // display success icon for other inputs
                    label
                        .addClass('valid') // mark the current input as valid and display OK icon
                    .closest('.form-group').removeClass('has-error').addClass('has-success'); // set success class to the control group
                }
            },

            submitHandler: function (form) {
				debugger;
                success.show();
                error.hide();
			//	fkjfjkj
				debugger;
				
                //add here some ajax code to submit your form or just call form.submit() if you want to submit the form without ajax
				
            }

        });
       	 if (form.valid() == false)
	     {
             return false;
         }
		else
		{
			//var formURL = $("submit_form").attr("action");
			//var postData = form.serializeArray();
			 var btn = $("#upload_article_btn");
			 btn.button('loading');
			$.ajax(
			{
				//data:postData,
				url :"results_of_tarh.php?step=step2",
				//url : formURL,
				data : new FormData(this),
				cache: false,
			    contentType: false,
			    processData: false,
			    type: "POST",
			    
				success:function(data, textStatus, jqXHR) 
				{
					debugger;
                    //alert(data);
					if(data=="true")
						
					{       $("#upload_file_i").switchClass( "fa-times", "fa-check", 1000, "easeInOutQuad" );
							toastr.options.timeOut="5000";
					        toastr.options.positionClass="toast-top-right";
					        if(language="en")
					        	toastr.success('Was Entry');
					        else
					        	toastr.success('ضميمه با موفقيت ثبت شد');
							
					}
					else if(data=="-5")
					{ 
							toastr.options.timeOut="5000";
							toastr.options.positionClass="toast-top-right";
							if(language=="en")
								toastr.error('This file has entered','Error');
							else
								toastr.error('چنين فايلي قبلا بارگذاري شده','خطا');
							
							
						}
					else if(data=="-2")
					{
							toastr.options.timeOut="5000";
							toastr.options.positionClass="toast-top-right";
							if(language=="en")
				    			toastr.error('The file size is greater than 8MB or The extension is incorrect ','Error');
							else
								toastr.error('حجم فابل ارسالي بيش از 8 مگابايت مي باشد يا پسوند فايل صحيح نمي باشد.','خطا');
					}
					else if(data=="false")
					{
							toastr.options.timeOut="5000";
							toastr.options.positionClass="toast-top-right";
							if(language=="en")
		      			    	toastr.error('The number of article is greater than 12','Error');
							else
								toastr.error('تعداد فايلهاي ارسالي حداکثر 12 عدد مي باشد','خطا');
					}
					 jadvZar_IsNew="insert";
					 $("#delete").modal('hide');
					 $(".sample_1").DataTable().destroy();
					 show_dataTable();		
				},
				error: function(jqXHR, textStatus, errorThrown) 
				{
					alert(textStatus);
				}
			}).always(function () { 
				 btn.button('reset');
			});
			//e.preventDefault(); //STOP default action
		   // e.unbind(); //unbind. to stop multiple form submit.
			
		}
	});



    var buttonText;
    var sButtonText;
    var info;
    if(language=="en"){
    		buttonText="Visibel Columns";
    		sButtonText="Print";
    		sButtonText2="Save";
    		info="view _START_ to _END_ from _TOTAL_ items";
    		sLengthMenu="View Content _MENU_";
    		sZeroRecords="Not Found";
    		sInfoEmpty="Empty";
    		sInfoFiltered="(Filtered From _MAX_ Items)";
    		sSearch="Search";
    		sFirst="First";
    		sPrevious="Previous";
    		sNext="Next";
    		sLast="Last";
    		
    		
    	}
    	else
    	{
    		buttonText="ستون هاي قابل نمايش";
    		sButtonText="چاپ";
    		sButtonText2="ذخيره";
    		info="نمايش _START_ تا _END_ از مجموع _TOTAL_ مورد";
    		sLengthMenu="نمايش محتويات _MENU_";
    		sZeroRecords="موردي يافت نشد";
    		sInfoEmpty="تهي";
    		sInfoFiltered="(فيلتر شده از مجموع _MAX_ مورد)";
    		sSearch="جستجو";
    		sFirst="ابتدا";
    		sPrevious="قبلي";
    		sNext="بعدي";
    		sLast="انتها";
    		
    	}

    function show_dataTable()
    {
    	var dt;				
    	
        dt = $('.sample_1').DataTable({
    		"dom": '<"clearfix">lfrtip',
//             "tableTools": {
//                 "sRowSelect": "os",
//     			 "aButtons": [
                   
//     				{
//                         "sExtends": "print",
//                         "sButtonText": sButtonText
//                     },
                    
//                     {
//                         "sExtends":    "collection",
//                         "sButtonText": sButtonText2,
//                         "aButtons":    [ 
//     										"csv", 
//     										"xls"
//     									]
//                     }
//                 ],
    	            
//     				"sSwfPath": "../assets/advanced-datatable/extensions/TableTools/swf/copy_csv_xls_pdf.swf"
//     	        },
    	        "fnInitComplete": function(oSettings, json) {
    		        
    		        //Begin of hide some of element from data table
    	        	$("#DataTables_Table_0_paginate").css("display","none");	
    	        	$("#DataTables_Table_1_paginate").css("display","none");
    	        	$("#DataTables_Table_0_info").css("display","none");
    	        	$("#DataTables_Table_1_info").css("display","none");
    			    $("#DataTables_Table_0_length").css("display","none");
    				$("#DataTables_Table_1_length").css("display","none");
    				$("#DataTables_Table_0_filter").css("display","none");
    				$("#DataTables_Table_1_filter").css("display","none");
    				//End of hide some of element from data table
    				//$(".ColVis_Button").addClass("margin-top-10");
    			    //$(".DTTT_container").addClass("margin-top-10");	
    				$(".table").addClass("margin-top-20");
    				//fixControlPosition();
    				
                    },
    	        "fnDrawCallback": function(oSettings) {
    	            var trs = $(".sample_1 tr");
    	            for (var i = 1; i < trs.length; i++) {

    	                var rowId = ($(trs[i]).attr('id'));
    	                $("#" + rowId + " td:last-child").trigger('click');

    	            }
    	           /* $('.edit_btn').on('click', function() {
    	                debugger;
    	                var tr = $(this).closest('tr');
    	                var row = dt.row(tr);
    	                //var idx = $.inArray(tr.attr('id'), detailRows);
    	                $('#fupload')[0].value = row.data().fupload;
    	                
    	                jadvZar_IsNew="edit";
    	                $("#basic").modal('show');
    	            });*/
    	            $('.delete_btn').on('click', function() {
    	                debugger;
    	                var tr = $(this).closest('tr');
    	                var row = dt.row(tr);
    	                $('#delete_id')[0].value = row.data().delete_id;
    	                
    	                jadvZar_IsNew="delete";
    	               // $("#delete").modal('show');
                    
    	            });
    	        },
//     	        "colVis": {
//     	           "buttonText": buttonText,
//     	           exclude:[2]
//     	       },
    	        
    	       "paging": true,
               'bPaginate': true,
               "pagingType": "full_numbers",
               "processing": true,
               "serverSide": true,
               "bDestroy": true,
               "bAutoWidth": false,
    			"language": {
           		
                   "sProcessing": "<img src='image/ajax-loader-white.gif'>",
                   "sLengthMenu": sLengthMenu,
                   "sZeroRecords": sZeroRecords,
                   "info": info,
                   "sInfoEmpty": sInfoEmpty,
                   "sInfoFiltered": sInfoFiltered,
                   "sInfoPostFix": "",
                   "sSearch": sSearch,
                   "sUrl": "",
                   "oPaginate" : {
                       "sFirst": sFirst,
                       "sPrevious": sPrevious,
                       "sNext": sNext,
                       "sLast": sLast
                   }
    	       },
    	        "sAjaxSource": "results_of_tarh_sabt.php?&action=select&admin=<?php echo $admin;?>&seed=<?php echo $seed;?>&cod_tarh=<?php echo $cod_tarh;?>" ,
    	        "aoColumns": [
    	            { "data": "file" },
    			    { "data": "delete", "bSortable": false },
    			    { "data": "delete_id","sClass": "hidden"}
    	        ]

    	    });    
    }
    </script>
    
<?php
footer_forms($admin,$seed);
?>

